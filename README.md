# MountainPass

# Проект виртуальной стажировки онлайн-школы Skillfactory

### Описание проекта

Мобильное приложение для оправки информации туристами о посещённых ими горных перевалов.

Мобильное приложение для Android и IOS, пользователями которого будут туристы. В горах они будут вносить данные о перевале в приложение и отправлять их в ФСТР ( Федерация спортивного туризма России ), как только появится доступ в Интернет, для того чтобы поделиться информацией с другими людьми, увлеющимися туризмом и преодолением горных перевалов.

### Работа проекта

### Внесение личной информации.

Для отправки информации туристу необходимо будет заполнить данные о себе (регистрация не требуется):

Фамилия

Имя

Отчество

Электронная почта

Номер телефона

### Внесение информации о горном перевале.

Для отправки информации о горном перевале, туристу необходимо будет также заполнить несколько полей:

Название горного перевала

Альтернативное название горного перевала

Произвольный текст ввиде комментария

Координаты горного перевала

Сложность восхождения (в зависимости от времени года)

Несколько фотографий

### Обработка информации.

Модератор из федерации будет верифицировать и вносить в базу данных информацию, полученную от пользователей, а те в свою очередь смогут увидеть в мобильном приложении статус модерации и просматривать базу с объектами, внесёнными другими.

### Содержание проекта.

### Основные пункты.

Проект выполнен на языке программирования Python. С использованием фреймворка Django. В проекте используется СУБД PostgreSQL

### Модели проекта.

Модель пользователя MyUser содержит 5 полей для заполнения данных о пользователе:

4 поля CharField для заполения данных;

1 поле EmailField для указания электронной почты.

Модель Coord служит для указания координат горного перевала и имеет 3 поля:

2 поля FloatField для указания широты и долготы;

1 поле IntegerField для указания высоты.

Модель Level служит для указания уровня сложности восхождения на тот или иногй горный перевал:

Имеет 4 поля CharField в каждом из которых необходимо выбрать уровень сложности восхождения от 1А до 5Б.

Основной моделью проекта является модель Pereval включающая в себя 9 полей:

4 поля CharField включающие в себя общее название, название и альтернативное название горного перевала, а таже поле status с выбором статуса модерации;

1 поле DateTimeField для даты и времени добавления горного перевала;

1 поле TextField для добавления произвольного комментария от пользователя;

Поля level_id и user_id имеющие отношения один ко многим с соответствующими моделями;

Поле coord_id имеющее отношение один к одному с соответствующей моделью.

Модель Images служит для добавления фото горного перевала, имеет 3 поля:

Поле pereval_id имеющее имеющие отношения один ко многим с соответствующей моделью;

Поле data имеющее тип ImageField для добавления ссылки на изображение;

А также поле title для обозначения названия изображения.

### Сериализаторы проекта.

Каждая модель проекта имеет соответствующий сериализатор. Основным сериализатором проекта служит PerevalSerializer содержащий в себе сериализаторы остальных моделей.

    class PerevalSerializer(WritableNestedModelSerializer):
        user_id = MyUserSerializer()
        coord_id = CoordSerializer()
        level_id = LevelSerializer(allow_null=True)
        images = ImagesSerializer(many=True)

### Представления и маршрутизация проекта.

В качестве представлений в проекте используется наследование класса ModelViewSet.

    class PerevalViewSet(viewsets.ModelViewSet):
        queryset = Pereval.objects.all()
        serializer_class = PerevalSerializer
    
В проекте используются url, предоставляющий список всех добавленных перевалов от пользователей path('submitData/, include(router.urls)) Можно просмотреть информацию об отдельном перевале по id. При этом есть возможность использовать CRUD методы, а также фильтровать добавленную информацию по электронной почте пользователя path('submitData/user__email=<str:email>').

### Ограничения в проекте.

В проекте существует условие при котором пользователь может изменить отправленные данные:

Данные не должны относиться к данным о самом пользователе (фамилия, имя, телефон и т.д.)
Статус модерации данной информации должен быть статусом New = "NW", при остальных статусах модерации, изменение данных невозможно.

### Пример JSON файла с данными.

    {
    "beauty_title": "перевал",
    "title": "Перевалов",
    "other_titles": "Гора",
    "connect": "коннект",
    "user_id": {
        "email": "eduard_mir1996@mail.ru",
        "fam": "Ахметзянов",
        "name": "Эдуард",
        "otc": "Ринатович",
        "phone": "89992223344"
    },
    "coord_id": {
        "latitude": 143.300,
        "longitude": 143.300,
        "height": 2400
    },
    "level_id": {
        "winter": "3a",
        "summer": "1a",
        "autumn": "2a",
        "spring": "2a"
    },
    "images": [{
        "data":"https://storage.yandexcloud.net/storage.yasno.media/nat-geo/images/2019/5/16/42483f0d38b9408698e3396b0fa1dee2.max-1200x800.jpg",
        "title": "перевал"
    }],
    "status": "NW"
    }

### Документация проекта с помощью Swagger.

http://127.0.0.1:8000/redoc/

http://127.0.0.1:8000/swagger/
